<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (keep your existing head content) ... -->
    <style>
        /* ... (keep your existing styles) ... */
        #reportModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        #reportText {
            width: 100%;
            height: 200px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Weekly Homework Todo List</h1>
    <h2>Week of 09/01/2024</h2>
    <div id="todoList"></div>
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Daily Report</h2>
            <p>Copy the text below and paste it into an email to send to derekkingfam@gmail.com</p>
            <textarea id="reportText" readonly></textarea>
        </div>
    </div>
    <script>
        const weeklyTasks = {
            'Tuesday 09/03/2024': [
                {'subject': 'Algebra 1 (H)', 'details': 'Agenda:\nDMR\nCompound Inequality Problem Solving\nCompound Inequality Additional Practice'},
                {'subject': 'Geography 7', 'details': 'Different Types of Maps, GPS, Map Projections'},
                {'subject': 'Life Science 7', 'details': 'Agenda: Continue classification of life notes. Discussed Archaebacteria, Eubacteria & protists (end at movement of protists)'},
                {'subject': 'Spanish 2-NH2', 'details': 'En la clase: Berto Chapters 1 and 2'}
            ],
            'Wednesday 09/04/2024': [
                {'subject': '7th Grade Entrepreneurial Leadership', 'details': 'Begin bringing in your "trash" items.'},
                {'subject': 'Algebra 1 (H)', 'details': 'Agenda:\nDMR\nReview Cmpd. Inequalities Additional Practice\n1.4-1.6 Review(answer key in OneNote)'},
                {'subject': 'Geography 7', 'details': 'Different Types of Maps, GPS, Map Projections'},
                {'subject': 'Life Science 7', 'details': 'Agenda: Continue notes & discussions'},
                {'subject': 'Spanish 2-NH2', 'details': 'En la clase: Berto Chapters 1 and 2'}
            ],
            'Thursday 09/05/2024': [
                {'subject': 'Algebra 1 (H)', 'details': 'Agenda:\n1.4-1.6 Quiz\nAbsolute Value Equations'},
                {'subject': 'Geography 7', 'details': 'Different Types of Maps, GPS, Map Projections'},
                {'subject': 'Life Science 7', 'details': 'DROP'},
                {'subject': 'Spanish 2-NH2', 'details': 'En la clase: Berto Chapters 1 and 2'}
            ],
            'Friday 09/06/2024': [
                {'subject': 'Algebra 1 (H)', 'details': 'Agenda:\nWriting Absolute Value Equations\nReview Abs. Value Equations HW\nAbs. Value Inequalities'},
                {'subject': 'English 7', 'details': 'HW: <strong>Prep for class discussion</strong> - brainstorm your answers to the "discussion questions" on your Lemon Brown annotation guide (you can write extra note on a Word doc, looseleaf paper, or in the extra room on your annotation guide) If you type on a word doc, please print before class.'},
                {'subject': 'Geography 7', 'details': 'ERB'},
                {'subject': 'Life Science 7', 'details': 'Agenda: Complete notes (plant & animal) . Start Kingdom brochure assignment in class.'},
                {'subject': 'Spanish 2-NH2', 'details': 'En la clase: Berto Chapters 1 and 2'}
            ]
        };

        function createTodoList() {
            const todoList = document.getElementById("todoList");
            
            for (const [day, tasks] of Object.entries(weeklyTasks)) {
                const dayDiv = document.createElement("div");
                dayDiv.className = "day";
                dayDiv.innerHTML = `<h2>${day}</h2>`;
                
                tasks.forEach(task => {
                    const taskDiv = document.createElement("div");
                    taskDiv.className = "task";
                    const taskId = `${day}-${task.subject.replace(/\s+/g, '-')}`;
                    taskDiv.innerHTML = `
                        <input type="checkbox" id="${taskId}" name="${taskId}">
                        <label for="${taskId}">
                            <strong>${task.subject}</strong><br>
                            ${task.details}
                        </label>
                    `;
                    dayDiv.appendChild(taskDiv);
                });

                const dayActionsDiv = document.createElement("div");
                dayActionsDiv.className = "day-actions";
                dayActionsDiv.innerHTML = `
                    <textarea id="${day}-notes" placeholder="Add your notes for ${day} here. If you didn't complete all assignments, please explain why."></textarea>
                    <button onclick="sendDailyReport('${day}')">Send ${day}'s Report</button>
                `;
                dayDiv.appendChild(dayActionsDiv);
                
                todoList.appendChild(dayDiv);
            }
            loadSavedState();
        }

        function saveState() {
            const state = {};
            document.querySelectorAll('.task input[type="checkbox"], textarea').forEach(el => {
                state[el.id] = el.type === 'checkbox' ? el.checked : el.value;
            });
            localStorage.setItem('todoListState', JSON.stringify(state));
        }

        function loadSavedState() {
            const savedState = JSON.parse(localStorage.getItem('todoListState')) || {};
            Object.entries(savedState).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = value;
                    } else if (element.tagName === 'TEXTAREA') {
                        element.value = value;
                    }
                }
            });
        }

        function sendDailyReport(day) {
            const report = generateDailyReport(day);
            document.getElementById('reportText').value = report;
            document.getElementById('reportModal').style.display = 'block';
        }

        function generateDailyReport(day) {
            const dayDiv = document.querySelector(`.day:has(h2:contains('${day}'))`);
            const completedTasks = [];
            const incompleteTasks = [];

            dayDiv.querySelectorAll('.task').forEach(task => {
                const checkbox = task.querySelector('input[type="checkbox"]');
                const label = task.querySelector('label');
                
                if (checkbox.checked) {
                    completedTasks.push(label.textContent.trim());
                } else {
                    incompleteTasks.push(label.textContent.trim());
                }
            });

            const notes = document.getElementById(`${day}-notes`).value;

            return `
Daily Status Report for ${day}

Completed Tasks:
${completedTasks.join('\n')}

Incomplete Tasks:
${incompleteTasks.join('\n')}

Notes:
${notes}
            `.trim();
        }

        // Close modal when clicking on <span> (x)
        document.querySelector('.close').onclick = function() {
            document.getElementById('reportModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            if (event.target == document.getElementById('reportModal')) {
                document.getElementById('reportModal').style.display = 'none';
            }
        }

        createTodoList();
    </script>
</body>
</html>
